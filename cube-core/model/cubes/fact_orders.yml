cubes:
  - name: FactOrders
    sql_table: ticketshopdb.`FACT_Orders`
    data_source: default
    
    joins: []
    
    dimensions:
      - name: order_id
        sql: order_id
        type: string
        primary_key: true
        
      - name: email
        sql: email
        type: string
        
      - name: ticket_id
        sql: ticket_id
        type: string
        
      - name: company_id
        sql: company_id
        type: string
        
      - name: shop_id
        sql: shop_id
        type: string
        
      - name: event_id
        sql: event_id
        type: string
        
      - name: payment_method
        sql: payment_method
        type: string
        
      - name: currency
        sql: currency
        type: string
        
      - name: refund_protect
        sql: refund_protect
        type: boolean
        
      - name: order_date
        sql: order_date
        type: time
        
    measures:
      - name: count
        type: count
        title: Order Count
        
      - name: total_order_value
        sql: order_value
        type: sum
        title: Total Order Value
        
      - name: avg_order_value
        sql: order_value
        type: avg
        title: Average Order Value
        
      - name: total_tickets_sold
        sql: ticket_count
        type: sum
        title: Total Tickets Sold
        
      - name: avg_tickets_per_order
        sql: ticket_count
        type: avg
        title: Average Tickets per Order

    pre_aggregations:
      # Pre-aggregation definitions go here.
      # Learn more in the documentation: https://cube.dev/docs/caching/pre-aggregations/getting-started